<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Trading Platform</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Login/Register Section -->
    <div id="auth-section" class="container">
        <div class="auth-container">
            <h1>Trading Platform</h1>
            
            <!-- Login Form - FIXED: Changed id from "login-form" to "loginForm" -->
            <div id="loginForm" class="auth-form">
                <h2>Login</h2>
                <form id="login-form">
                    <input type="email" id="login-email" placeholder="Email" required>
                    <input type="password" id="login-password" placeholder="Password" required>
                    <button type="submit">Login</button>
                </form>
                <p>Don't have an account? <a href="#" id="show-register">Register</a></p>
            </div>
            
            <!-- Register Form - FIXED: Changed id from "register-form" to "registerForm" -->
            <div id="registerForm" class="auth-form" style="display: none;">
                <h2>Register</h2>
                <form id="register-form">
                    <input type="text" id="register-name" placeholder="Full Name">
                    <input type="email" id="register-email" placeholder="Email" required>
                    <input type="password" id="register-password" placeholder="Password" required>
                    <button type="submit">Register</button>
                </form>
                <p>Already have an account? <a href="#" id="show-login">Login</a></p>
            </div>
        </div>
    </div>
    
    <!-- Trading Dashboard -->
    <div id="dashboard-section" class="container" style="display: none;">
        <!-- Header -->
        <header>
            <h1>Trading Dashboard</h1>
            <div class="user-info">
                <span id="user-email"></span>
                <span id="user-balance"></span>
                <button id="logout-btn">Logout</button>
            </div>
        </header>
        
        <!-- Market Prices -->
        <section class="market-section">
            <h2>Market Prices</h2>
            <div id="market-prices" class="market-grid">
                <!-- Prices will be loaded here -->
            </div>
        </section>
        
        <!-- Order Form -->
        <section class="order-section">
            <h2>Place Order</h2>
            <form id="order-form">
                <select id="order-symbol" required>
                    <option value="">Select Symbol</option>
                    <option value="AAPL">AAPL - Apple</option>
                    <option value="GOOGL">GOOGL - Google</option>
                    <option value="MSFT">MSFT - Microsoft</option>
                    <option value="AMZN">AMZN - Amazon</option>
                    <option value="TSLA">TSLA - Tesla</option>
                </select>
                
                <select id="order-type" required>
                    <option value="">Order Type</option>
                    <option value="BUY">Buy</option>
                    <option value="SELL">Sell</option>
                </select>
                
                <select id="order-subtype" required>
                    <option value="MARKET">Market Order</option>
                    <option value="LIMIT">Limit Order</option>
                    <option value="STOP_LOSS">Stop Loss</option>
                    <option value="STOP_LIMIT">Stop Limit</option>
                </select>
                
                <input type="number" id="order-quantity" placeholder="Quantity" min="1" required>
                
                <!-- CRITICAL: This price input was missing and causing the null error -->
                <input type="number" id="order-price" placeholder="Price" min="0.01" step="0.01" required>
                
                <div id="limit-price-group" style="display: none;">
                    <input type="number" id="limit-price" placeholder="Limit Price" min="0.01" step="0.01">
                </div>
                
                <div id="stop-price-group" style="display: none;">
                    <input type="number" id="stop-price" placeholder="Stop Price" min="0.01" step="0.01">
                </div>
                
                <select id="time-in-force">
                    <option value="DAY">Day</option>
                    <option value="GTC">Good Till Cancelled</option>
                    <option value="IOC">Immediate or Cancel</option>
                </select>
                
                <button type="submit">Place Order</button>
            </form>
            <div id="order-message"></div>
        </section>
        
        <!-- Portfolio -->
        <section class="portfolio-section">
            <h2>My Portfolio</h2>
            <div id="portfolio-summary">
                <div class="summary-item">
                    <span>Cash Balance:</span>
                    <span id="cash-balance">$0.00</span>
                </div>
                <div class="summary-item">
                    <span>Market Value:</span>
                    <span id="market-value">$0.00</span>
                </div>
                <div class="summary-item">
                    <span>Total Value:</span>
                    <span id="total-value">$0.00</span>
                </div>
            </div>
            
            <h3>Holdings</h3>
            <table id="holdings-table">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>Quantity</th>
                        <th>Avg Price</th>
                        <th>Current Price</th>
                        <th>Market Value</th>
                        <th>P&L</th>
                    </tr>
                </thead>
                <tbody id="holdings-body">
                    <!-- Holdings will be loaded here -->
                </tbody>
            </table>
        </section>
        
        <!-- Order History -->
        <section class="history-section">
            <h2>Order History</h2>
            <table id="history-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Symbol</th>
                        <th>Type</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="history-body">
                    <!-- History will be loaded here -->
                </tbody>
            </table>
        </section>
    </div>
    
    <!-- FIXED: Removed duplicate app.js script tag and organized scripts properly -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="js/websocket.js"></script>
    <script src="js/app.js"></script>
</body>
</html>